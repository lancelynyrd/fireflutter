# 시작하기

모델하우스는 다 함께 공부하고 실습하면서 개발하는, Flutter 와 Firebase 를 사용하여 빠르게 앱을 구축하기 위한 UI 라이브러리 개발 프로젝트이다. 아름다운 UI 디자인 뿐만아니라 회원 가입, 게시판, 채팅, 소셜 기능을 모두 포함하는 완전한 소셜 앱 패키지로 매우 쉽게 사용이 가능하도록 하는 것이 목표이다.


## 개요

- 누구나 참여할 수 있다.
- 라이센스는 MIT 이며, 누구든지 어떤 목적으로든 사용 할 수 있다.
- `모델하우스`를 줄여서 `하우스`라고 부른다.



## 참여 방법

가장 먼저 협업하는 방법에 대해서 배워한다. 협업을 하기 위해서는

- Git 을 알아야하고, [Dart 스타일 가이드](https://dart-ko.dev/guides/language/effective-dart),
- [Flutter 스타일 가이드](https://github.com/flutter/flutter/blob/master/docs/contributing/Style-guide-for-Flutter-repo.md)을 잘 알고 있어야 한다.
- 또한 필수적으로 문서화를 잘 해야 한다. 문서화는 소스 코드에 하고 Markdown 파일에 해야 한다.
- 소스 코드 포멧의 통일을 위해서 편집기는 VSCode 만 사용한다. VSCode 를 사용해서, 각종 설정 까지 공유를 한다. 
- 모델하우스 코드 컨벤션을 통해서 통일성있는 코드를 작성해 나간다.

### Git

팀 작업을 위한 Git 명령어 사용법을 꼭 익혀야 한다.

예를 들면 fork 후 pr 을 하고, origin 에서 업데이트 된 내용을 local 로 받아오는 등의 작업이 필요하므로 이에 대한 이해를 충분히 해야 한다.


### 문서화

패키지로 만들어 공개하고 많은 개발자들이 이용하기를 바란다면 문서화를 잘 해 놓는 것이 가장 중요하겠다. 같은 맛이면 보기 좋은 떡이 점수가 더 높은 법이다.

그래서 가장 먼저 해야 할 것이 문서화를 어떻게 하는 것이다.

소스 코드 내에 문서화를 하는 방법과 Markdown 에 문서화를 하는 두가지 방법을 배워야 한다.



### 소스 코드 업데이트 방법: fork 와 pr

협업을 하는 가장 일반적인 방법 중 하나가 `fork 후 pr` 이라고 하겠다. 아래와 같이 하면 된다.

- 프로젝트 홈페이지: https://github.com/thruthesky/model_house 로 접한다.
- fork 한다.
- fork 한 것을 clone 한다.
- 자신 만의 branch 를 만든다.
- branch 에서 작업하고 push 한다.
- pr 한다.
- pr 이 완료되기 까지 기다린다 또는 핵심 개발자에게 요청한다.

그리고 업데이트가 있을 때마다 origin 에서 다운받는다.



### 코드 리뷰

코드 리뷰의 목적은 `pr` 을 accept 하기 전에 `하우스 개발 가이드`에 맞게 작성되었는지 확인을 받는 것이다.



### 핵심 개발자

- 핵심 개발자는 git repo 의 collaborator 로 등록되는 개발자를 말하며, 참여도가 높고, `하우스`를 잘 이해하는 개발자이면 된다.
- 핵심 개발자는 주로 핵심 기능을 개발하고, 코드 리뷰를 하며, PR 을 머지하는 역할을 한다.
- 핵심 개발자 신청은 thruthesky@gmail.com 으로 연락을 하면 된다.



## 하우스 코딩 컨벤션 - 하우스 개발 가이드

코드 컨벤션이란 일종의 코딩 스타일을 말하는데, 많은 개발자들이 협업할 때, 통일된 방식의 코드를 작성하여 가독성을 높이고자 하는데에 있다. 한 마디로 규칙에 맞게 코드를 작성하라는 것이다. 그리고 그 규칙이란 가장 표준스러운 규칙이어야 할 것이다.


### 테스트

테스트 코드를 작성하는 것은 절대적으로 중요하지만, 플러터에서 테스트를 하는 것이 만만치 않아서, 테스트 코드 작성을 강제로 요구한다면 `하우스` 개발 참여에 큰 장벽이 된다.

특히, Flutter 의 Unit Test, Widget Test, Integration Test 는 매우 절망적이다. 예를 들면, Dart 용 공식 Firebase SDK 가 없어서 각종 Mock 클래스를 사용해야하는 번거로움이 있고, Widget Test 는 온갖 pump 질을 해야하고, Integration Test 는 매우 느리고 코딩 작업이 힘들다. 물론 잘해야 겠지만, 쉽지 않다.

그래서 다음과 같은 테스트 규칙을 정한다.

- 핵심 개발자는 반드시 Unit Test 를 해야 한다.
- Unit Test 는 안타깝게도 플러터스러운 Unit Test 가 아니며, Unit 단위로 테스트만 할 수 있으면 된다는 목적을 가진다.
- Unit Test 는 주로 UI 가 없는 함수 위주로 이루어지며 Firebase 를 포함시키기 위해서, 실제로 플러터 앱을 실행한 다음, Firebase 를 연결 하고,  `UnitTestButton` 위젯을 탭하면 선택적으로 Unit Test 를 할 수 있도록 제공한다. 자세한 내용은 [유닛테스트](#) 항목을 참고한다.


### 문서화

문서화는 두 가지가 있다.

- 소스 코드에 코멘트로 작성하는 것은 주로 소스 코드 그 자체에 대한 설명만 하며, pub.dev 의 API Reference 에 자동으로 적용된다. 따라서 여러분들 중에서 소스 코드의 코멘트에 오류가 있거나 보강할 내용이 있으면 적극적으로 Fork 후 수정하여 PR 해 주면 된다.
- Markdown 파일에 전반적인 `하우스` 이용 방법에 대한 설명을 작성하는 데, `<project-folder>/docs` 폴더에 작성하면 된다. 이 Markdown 설명서는 `MkDocs` 에 의해서 자동으로 웹사이트로 업데이트 된다.




### 코드는 무조건 짧아야 한다.

- 코드는 무조건 짧아야 한다. 그래야 단순하다. 단순해야 읽기 쉽다.
- 긴 코드는 무조건 삭제되어야 한다. 코드가 길거나 복잡하면 코드 리뷰 reject 될 가능성이 매우 높다.

### 플러터스러움

- Dart & Flutter 코딩 스타일 가이드를 따르며,
- Flutter 컨벤션을 따른다. 예를 들면, 많은 라이브러디르에서 `Xyz.instance` 와 같이 Singleton 사용 방식을 그대로 따라 한다. 또 다른 예로 `ListView.builder` 와 같이 named contructor 를 많이 사용하는데, 그러한 방식을 그대로 따라서 한다. 모델링, 상태관리, 이벤트 등 많은 부분에서 가장 플러터스러운 코드를 작성하도록 한다.
- 당연하겠지만 dart style guide 와 flutter style guide 를 따라서 작업을 해야 한다. 그래야 개발자들 끼리 소스 코드를 바탕으로 쉽게 소통 할 수 있는 것이다.


### 상태관리

- Firebase 를 쓰면서 상태 관리를 따로 하는 것은 낭비이다.
- 그럴리는 없겠지만, 만약, 상태 관리가 조금이라도 필요하다면 직접 상태관리자를 만들어 쓴다.



### 모델

- 모델은 각 데이터의 분류에 따라 만들어 진다. 예를 들면 사용자는 User, 게시판 카테고리는 Category, 게시글은 Post, 코멘트는 Comment, Chat, ChatRoom, ChatMessage, Report 등등으로 나뉜다.
- 모델은 데이터를 모델링하는 serialize/deserialize 기능 뿐만이나, 기본적인 CRUD 및 동작 기능을 가지고 있다.
    - 즉, 해당 Entity 의 데이터 관리 뿐만아니라 MVC 모델에서 Model 이 하는 business logic 까지 포함된다. 단, 이 business logic 은 해당 Entity 에 대한 것으로 제한을 한다. 예를 들면,
        - `user.like()`, `post.like()`, `comment.like()` 와 같은 공통되고 통일성이 있는 로직 부터, `User.create()`, `user.update()`, `user.resign()`, `user.follow()`, `user.block()` 등 해당 Entity 의 다양한 로직을 가지고 있다.



### 서비스

- 서비스는 모델에서 제공하지 않는 기능을 담는다.
- 서비스는 `FirebaseAuth.instance` 와 같은 방식의 Singleton 으로 사용하며
- 예를 들어, 사용자의 아바타를 터치(클릭)했을 때, 사용자의 프로필을 화면에 띄워야 한다. 그런데 사용자의 아바타는 글, 코멘트, 채팅 뿐만아니라 앱의 구조에서 깊숙한 곳에서 다양한 방식으로 표시될 수 있다. 또한 본 패키지를 사용하는 개발자가 임의의 위치에 아바타를 표시 할 수 있다. 이 때 사용자의 프로필을 화면에 띄우는 로직을 매번 코딩해야한다면 번거롭기도 하며 실수로 에러가 날 수 있고, 또 해당 로직이 변경되면, 모든 아바타를 쓰는 곳에 일일히 변경을 해 주어야 한다. 그래서 사용자 프로필을 여는 로직을 함수로 만들어 놓아야하는데, 그러한 함수를 모델 별로 묶어 놓은것이 서비스이다.
- 서비스에는 UserService, CategoryService, PostService, CommentService 등과 같이 있으며 공통적인 루틴이 있다.

