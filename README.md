# 모델하우스

- 본 패키지는 Flutter 와 Firebase 를 통해서 앱을 빠르게 개발할 수 있도록 도와주는 UI 디자인과 회원 가입, 게시판, 채팅, 푸시 알림, 소셜 기능을 모두 포함하는 Framework 성격의 패키지이다. 목적은 `ModelHouse` 패키지 하나만 사용하면 모든 앱이 디자인과 기능이 다 만들어져 그대로 배포를 하면 되도록 하는 것이다. 물론 기능 추가, 디자인이나 로직의 변경은 쉽게 커스터마이징 할 수 있다.

- 본 패키지는 스터디하며 여러 개발자들과 같이 만드는 것이지만, 실전에 쓰이기에 충분히 좋은 패키지를 만드는 것이다.

- 본 패키지의 라이센스는 MIT 이며, 누구든지 어떤 목적으로든 사용 할 수 있다. 즉, 할 수 있다면 이 패키지를 다른 사람에게 판매를 해도 상관없다. 원하는 모든 것을 마음대로 하면 된다.

- 다만, 본 패키지의 관리 및 운영은 송재호(thruthesky@gmail.com)가 하며, 이로 인해 발생하는 모든 수익(예를 들어, 패키지 설명 홈페이지의 광고 수익 등)은 송재호가 가진다.


## 개요

가칭: 모델하우스. 정식 명칭은 차차 변경.




## 배우게 될 것

가장 먼저 협업하는 방법에 대해서 배워한다.

### Git

팀 작업을 위한 Git 명령어 사용법을 꼭 익혀야 한다.

예를 들면 fork 후 pr 을 하고, origin 에서 업데이트 된 내용을 local 로 받아오는 등의 작업이 필요합니다.


### 문서화

패키지로 만들어 공개하고 많은 개발자들이 이용하기를 바란다면 문서화를 잘 해 놓는 것이 가장 중요하겠다. 같은 맛이면 보기 좋은 떡이 점수가 더 높은 법이다.

그래서 가장 먼저 해야 할 것이 문서화를 어떻게 하는 것이다.

소스 코드 내에 문서화를 하는 방법과 Markdown 에 문서화를 하는 두가지 방법을 배워야 한다.



## 참여 방법

### 소스 코드 업데이트 방법: fork 와 pr

`fork 후 pr 하시면 됩니다.` 라고 짧게 끝내면 어떻게 해야할지 모르겠죠? 그래서 아래에 자세히 설명을 해 놓았다.

- 프로젝트 홈페이지: https://github.com/thruthesky/model_house 로 접한다.
- fork 한다.
- fork 한 것을 clone 한다.
- 자신 만의 branch 를 만든다.
- branch 에서 작업하고 push 한다.
- pr 한다.
- pr 이 완료되기 까지 기다린다 또는 핵심 개발자에게 요청한다.


업데이트가 있을 때마다 origin 에서 다운받는다.



### 코드 리뷰

코드 리뷰를 받지 못했으면, 핵심개발자에게 물어본다.




## 개발 가이드

### 읽기 쉬운 코드

- 코드는 무조건 짧아야 한다. 그래야 단순하다. 단순해야 읽기 쉽다.
- 긴 코드는 무조건 삭제되어야 한다. 코드가 길거나 복잡하면 코드 리뷰 reject 될 가능성이 매우 높다.

### 플러터 스러움

- 자바, 자바스크립트, 파이썬 등 다른 언어에서 자주 사용하는 용어, 개념 등을 가져와 쓰는 경우가 있는데, 플러터다운 코드를 작성해야한다.
- 당연하겠지만 dart style guide 와 flutter style guide 를 따라서 작업을 해야 한다. 그래야 개발자들 끼리 소스 코드를 바탕으로 서로 소통 할 수 있는 것이다.



### 상태관리

- Firebase 를 쓰면서 상태 관리를 따로 하는 것은 낭비라고 생각한다.
- 현존하는 상태 관리자를 쓰지 않는다. 특히, 상태 관리자 자체를 아예 쓰지 않는 방향으으로 한다.
- 꼭 필요하다면, 직접 만들어 쓴다. `InheritedWidget` 를 사용하는 종류(예: Bloc, Provider, Getx)보다는 `RxDart` 또는 `ValueNotifier` 방식으로 직접 만들어 사용한다.



### 모델

- 모델은 각 데이터의 분류에 따라 만들어 진다. 예를 들면 사용자는 User, 게시판 카테고리는 Category, 게시글은 Post, 코멘트는 Comment, Chat, ChatRoom, ChatMessage, Report 등등으로 나뉜다.
- 모델은 각 데이터를 serialize/deserialize 하는 것 뿐만이나, 기본적인 CRUD 및 동작 기능을 가지고 있다.
    - 즉, 해당 Entity 의 데이터 관리 뿐만아니라 MVC 모델에서 Model 이 하는 business logic 까지 포함된다. 단, 이 business logic 은 해당 Entity 에 대한 것으로 제한을 한다. 예를 들면,
        - `user.like()`, `post.like()`, `comment.like()` 와 같은 공통되고 통일성이 있는 로직 부터, `User.create()`, `user.update()`, `user.resign()`, `user.follow()`, `user.block()` 등 해당 Entity 의 다양한 로직을 가지고 있다.



### 서비스

- 서비스는 모델에서 제공하지 않는 기능을 담는다.
- 서비스는 `FirebaseAuth.instance` 와 같은 방식의 Singleton 으로 사용하며
- 예를 들어, 사용자의 아바타를 터치(클릭)했을 때, 사용자의 프로필을 화면에 띄워야 한다. 그런데 사용자의 아바타는 글, 코멘트, 채팅 뿐만아니라 앱의 구조에서 깊숙한 곳에서 다양한 방식으로 표시될 수 있다. 또한 본 패키지를 사용하는 개발자가 임의의 위치에 아바타를 표시 할 수 있다. 이 때 사용자의 프로필을 화면에 띄우는 로직을 매번 코딩해야한다면 번거롭기도 하며 실수로 에러가 날 수 있고, 또 해당 로직이 변경되면, 모든 아바타를 쓰는 곳에 일일히 변경을 해 주어야 한다. 그래서 사용자 프로필을 여는 로직을 함수로 만들어 놓아야하는데, 그러한 함수를 모델 별로 묶어 놓은것이 서비스이다.
- 서비스에는 UserService, CategoryService, PostService, CommentService 등과 같이 있으며 공통적인 루틴이 있다.

